# 浏览器安装与更新指南

## 🔍 问题诊断

您遇到的错误：`navigator.mediaDevices 不存在`

**原因**：您当前使用的浏览器不支持 WebRTC API

**解决方案**：更新浏览器或安装现代浏览器

---

## ✅ 推荐浏览器（按推荐程度排序）

### 1. Google Chrome（强烈推荐）

**✅ 优势**：
- 对 WebRTC 支持最好
- 更新频繁，功能最全
- 跨平台支持（Windows/Mac/Linux）

**📥 下载安装：**

#### Windows/Mac 用户：
```
官方下载地址：
https://www.google.com/chrome/

或者国内镜像：
https://www.google.cn/chrome/
```

#### Linux (Ubuntu/Debian) 用户：
```bash
# 方法 1：使用 wget 下载
wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
sudo dpkg -i google-chrome-stable_current_amd64.deb
sudo apt-get install -f

# 方法 2：添加官方源
wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add -
sudo sh -c 'echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google-chrome.list'
sudo apt update
sudo apt install google-chrome-stable

# 启动 Chrome
google-chrome
```

**✅ 版本要求**：Chrome 53+ （当前最新版本已经是 120+）

---

### 2. Microsoft Edge（推荐）

**✅ 优势**：
- Windows 10/11 自带，无需单独安装
- 基于 Chromium，与 Chrome 兼容性相同
- 性能优秀

**📥 下载安装：**

#### Windows 用户：
```
Windows 10/11 已预装 Edge，直接使用即可

如需更新：
https://www.microsoft.com/edge
```

#### Mac/Linux 用户：
```
官方下载地址：
https://www.microsoft.com/edge
```

**✅ 版本要求**：Edge 79+ （基于 Chromium）

---

### 3. Mozilla Firefox（推荐）

**✅ 优势**：
- 开源浏览器
- 隐私保护好
- 对 WebRTC 支持良好

**📥 下载安装：**

#### Windows/Mac 用户：
```
官方下载地址：
https://www.mozilla.org/firefox/

或者国内镜像：
http://www.firefox.com.cn/
```

#### Linux (Ubuntu/Debian) 用户：
```bash
# 方法 1：使用 apt 安装
sudo apt update
sudo apt install firefox

# 方法 2：使用 snap 安装
sudo snap install firefox

# 启动 Firefox
firefox
```

**✅ 版本要求**：Firefox 36+ （当前最新版本已经是 120+）

---

### 4. Safari（Mac/iOS 用户）

**⚠️ 注意**：Safari 对 WebRTC 的支持较晚

**📥 更新方式：**

#### Mac 用户：
```
Safari 随 macOS 系统更新

更新方法：
系统偏好设置 → 软件更新
```

#### iOS 用户：
```
Safari 随 iOS 系统更新

更新方法：
设置 → 通用 → 软件更新
```

**✅ 版本要求**：
- Safari 11+ (macOS High Sierra 或更新)
- iOS 11+ (iPhone/iPad)

---

## ❌ 不支持的浏览器

以下浏览器**不支持或支持不完整**，请勿使用：

| 浏览器 | 状态 | 建议 |
|-------|------|------|
| **IE 11 及更早版本** | ❌ 完全不支持 | 请改用 Chrome/Edge |
| **360安全浏览器（兼容模式）** | ⚠️ 部分支持 | 切换到"极速模式" |
| **QQ浏览器（兼容模式）** | ⚠️ 部分支持 | 切换到"极速模式" |
| **搜狗浏览器（兼容模式）** | ⚠️ 部分支持 | 切换到"极速模式" |
| **微信内置浏览器** | ⚠️ 权限受限 | 用"在浏览器中打开" |

---

## 🔧 如何检查您当前的浏览器

### 方法 1：访问检测页面

在浏览器中访问：
```
http://192.168.111.172:8001/static/browser_check.html
```

这个页面会显示：
- 您的浏览器名称和版本
- 是否支持 WebRTC
- 具体缺少哪些功能
- 推荐的解决方案

### 方法 2：手动检查浏览器版本

#### Chrome/Edge:
1. 点击右上角的 `⋮` (三个点)
2. 选择"帮助" → "关于 Chrome/Edge"
3. 查看版本号（例如：Version 120.0.6099.109）

#### Firefox:
1. 点击右上角的 `☰` (三横线)
2. 选择"帮助" → "关于 Firefox"
3. 查看版本号（例如：Firefox 121.0）

#### Safari (Mac):
1. 顶部菜单栏：Safari → 关于 Safari
2. 查看版本号（例如：Version 17.1）

---

## 🚀 快速解决方案（3个选项）

### 选项 1：安装 Chrome 浏览器（推荐）

**适用于：Windows/Mac/Linux 所有用户**

```
1. 访问：https://www.google.com/chrome/
2. 下载并安装
3. 打开 Chrome 浏览器
4. 访问：http://192.168.111.172:8001/static/camera_capture.html
```

**预计时间**：5-10 分钟

---

### 选项 2：更新现有浏览器

**如果您已经有 Chrome/Edge/Firefox，但版本较旧：**

#### Chrome/Edge:
1. 点击右上角 `⋮` → 帮助 → 关于
2. 浏览器会自动检查更新并安装
3. 重启浏览器

#### Firefox:
1. 点击右上角 `☰` → 帮助 → 关于 Firefox
2. 浏览器会自动检查更新并安装
3. 重启浏览器

**预计时间**：5 分钟

---

### 选项 3：使用替代方案（无需更新浏览器）

**如果不想安装/更新浏览器，使用我创建的兼容方案：**

```
http://192.168.111.172:8001/static/camera_mobile_capture.html
```

**✅ 优势**：
- 支持**所有浏览器**（包括 IE 11）
- 不需要 WebRTC
- 直接调用系统相机

**预计时间**：立即可用

---

## 📱 移动设备（手机/平板）

### Android 手机：
- ✅ **Chrome**（推荐）
- ✅ **Firefox**
- ⚠️ 微信浏览器（使用"在浏览器中打开"）

### iPhone/iPad：
- ✅ **Safari**（iOS 11+）
- ✅ **Chrome**
- ⚠️ 微信浏览器（使用"在浏览器中打开"）

**使用方法**：
1. 在手机浏览器中访问：`http://192.168.111.172:8001/static/camera_mobile_capture.html`
2. 点击拍照按钮
3. 允许相机权限
4. 拍照并上传识别

---

## 🎯 针对您的情况的建议

根据您遇到的 `navigator.mediaDevices 不存在` 错误，我建议：

### 🥇 最佳方案：安装 Google Chrome

**原因**：
- Chrome 对 WebRTC 支持最完善
- 跨平台兼容性最好
- 更新维护活跃

**下载地址**：https://www.google.com/chrome/

### 🥈 次优方案：使用替代页面

**如果不想安装新浏览器**：

直接访问兼容版本：
```
http://192.168.111.172:8001/static/camera_mobile_capture.html
```

这个页面不依赖 WebRTC，所有浏览器都能用！

---

## 🔍 常见问题

### Q1: 我在 Linux 服务器上，没有图形界面，怎么办？

**A**: Linux 服务器上不需要浏览器！

您应该在**另一台有摄像头的机器**（笔记本、手机等）上打开浏览器，然后访问：
```
http://192.168.111.172:8001/static/camera_mobile_capture.html
```

### Q2: 我更新了浏览器，还是不行？

**A**: 请访问检测页面确认：
```
http://192.168.111.172:8001/static/browser_check.html
```

如果检测显示仍不支持，请尝试：
1. 清除浏览器缓存
2. 重启浏览器
3. 使用隐私/无痕模式测试

### Q3: 我用的是国产浏览器（360/QQ/搜狗等）

**A**: 这些浏览器通常有两种模式：
- **兼容模式**（IE 内核）❌ 不支持
- **极速模式**（Chrome 内核）✅ 支持

**切换方法**：
- 360浏览器：地址栏右侧有"闪电"图标，点击切换
- QQ浏览器：地址栏右侧有图标，切换到"极速模式"
- 搜狗浏览器：地址栏右侧切换到"高速模式"

### Q4: 我在公司/学校网络，无法下载浏览器

**A**: 使用替代方案：
```
http://192.168.111.172:8001/static/camera_mobile_capture.html
```

或者用手机访问（确保手机和服务器在同一 WiFi）

---

## 📊 浏览器版本要求对照表

| 功能 | Chrome | Edge | Firefox | Safari | 说明 |
|-----|--------|------|---------|--------|------|
| **getUserMedia** | 53+ | 79+ | 36+ | 11+ | WebRTC 摄像头 |
| **File API** | 6+ | 12+ | 3.6+ | 6+ | 文件上传 |
| **FormData** | 7+ | 12+ | 4+ | 5+ | 表单提交 |
| **Fetch API** | 42+ | 14+ | 39+ | 10.1+ | 网络请求 |

**结论**：
- ✅ Chrome 53+ 完全支持所有功能
- ✅ Edge 79+ 完全支持所有功能
- ✅ Firefox 39+ 完全支持所有功能
- ✅ Safari 11+ 完全支持所有功能

---

## 🎯 立即行动

### 步骤 1：检测当前浏览器

访问：http://192.168.111.172:8001/static/browser_check.html

### 步骤 2：根据检测结果选择：

**如果显示"✅ 完全支持"**：
→ 使用：http://192.168.111.172:8001/static/camera_capture.html

**如果显示"❌ 不支持"**：
→ 安装 Chrome 浏览器，或使用替代方案：
→ http://192.168.111.172:8001/static/camera_mobile_capture.html

---

## 💡 最简单的解决方案

**不想折腾？直接用这个：**

```
http://192.168.111.172:8001/static/camera_mobile_capture.html
```

**优势**：
- ✅ 所有浏览器都支持（包括 IE）
- ✅ 不需要安装或更新任何东西
- ✅ 立即可用

**唯一的区别**：
- 不能实时预览摄像头画面
- 但可以正常拍照和识别

---

**创建时间**：2026-01-09
**适用版本**：1.0.2
